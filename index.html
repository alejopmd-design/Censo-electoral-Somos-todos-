<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>COMMAND CENTER CALI</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; background: #f1f5f9; padding: 20px; text-transform: uppercase; text-align: center; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .card { background: white; padding: 20px; border-radius: 12px; border-top: 5px solid #2563eb; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .val { font-size: 2.5rem; font-weight: bold; color: #0f172a; display: block; }
    </style>
</head>
<body>
    <h1>COMMAND CENTER - LIVE</h1>
    <div class="grid">
        <div class="card">TOTAL VOTANTES<span class="val" id="tV">0</span></div>
        <div class="card" style="border-top-color:#10b981">ROSSE MARY<span class="val" id="tRM">0</span></div>
        <div class="card" style="border-top-color:#ef4444">ALERTAS<span class="val" id="tA">0</span></div>
    </div>
    <div id="alertas"></div>

    <script>
        const _s = supabase.createClient('https://pmwlkdariynhaqbqursp.supabase.co', 'sb_publishable_zCu9cBa2qf9HqQuZ2YufzA_yTmwfiHv');
        async function carga() {
            const {data: v} = await _s.from('VOTANTES').select('lider');
            if(v) {
                document.getElementById('tV').innerText = v.length;
                document.getElementById('tRM').innerText = v.filter(x => (x.lider||"").toUpperCase().includes("ROSSE")).length;
            }
        }
        carga();
        setInterval(carga, 10000);
    </script>
</body>
</html>
